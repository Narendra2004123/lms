<div class="container" id="content">
    <h2 style="text-align: center;">Indent Form</h2>
    <h6 style="text-align: center;">INDENT FOR PURCHASE OF EQUIPMENT/CONSUMABLE</h6>
  
    <form (ngSubmit)="onSubmit()" #indentForm="ngForm">
      <!-- Basic Details -->
      <label>Department:<span class="required-star">*</span></label>
      <input type="text" name="department" [(ngModel)]="indent.department" required />
  
      <label>Asset Type:<span class="required-star">*</span></label>
      <select name="asset_type" [(ngModel)]="indent.asset_type" required>
        <option value="" disabled>Select Type</option>
        <option value="Non-Consumable">Non-Consumable</option>
        <option value="Consumable">Consumable</option>
        <option value="Intangible">Intangible</option>
      </select>
  
      <label>Budget Head:<span class="required-star">*</span></label>
      <input type="text" name="budget_head" [(ngModel)]="indent.budget_head" required />
  
      <label>Date:<span class="required-star">*</span></label>
      <input type="date" name="date" [(ngModel)]="indent.date" required />
  
      <!-- Indenter & HOD -->
      <label>Indenter Name:<span class="required-star">*</span></label>
      <input type="text" name="indenterName" [(ngModel)]="indent.indenterName" required />
  
      <label>Indenter Designation:<span class="required-star">*</span></label>
      <input type="text" name="indenterDesignation" [(ngModel)]="indent.indenterDesignation" required />
  
      <label>HOD Name:<span class="required-star">*</span></label>
      <input type="text" name="hodName" [(ngModel)]="indent.hodName" required />
  
      <label>HOD Designation:<span class="required-star">*</span></label>
      <input type="text" name="hodDesignation" [(ngModel)]="indent.hodDesignation" required />
  
      <!-- Purpose -->
      <label>Purpose of Purchase:<span class="required-star">*</span></label>
      <textarea name="purposeOfPurchase" [(ngModel)]="indent.purposeOfPurchase" maxlength="500" rows="4" (input)="updateCharCount()" required></textarea>
      <p>{{ remainingChars }}/500 characters remaining</p>
  
      <!-- Item Details -->
      <label>Item Name:<span class="required-star">*</span></label>
      <input type="text" name="itemName" [(ngModel)]="indent.itemName" required />
  
      <label>Quantity:<span class="required-star">*</span></label>
      <input type="number" name="quantity" [(ngModel)]="indent.quantity" required />
  
      <label>Estimated Cost (â‚¹):<span class="required-star">*</span></label>
      <input type="number" name="cost" [(ngModel)]="indent.cost" required />
  
      <!-- Installation -->
      <label>Installation/Commissioning By:<span class="required-star">*</span></label>
      <select name="installationBy" [(ngModel)]="indent.installationBy" required>
        <option value="" disabled>Select</option>
        <option>Indenter</option>
        <option>Supplier</option>
        <option>Manufacturer</option>
        <option>Authorized Agent</option>
        <option>Dealer</option>
      </select>
  
      <label>Delivery Period (Days/Weeks/Months):<span class="required-star">*</span></label>
      <input type="text" name="deliveryPeriod" [(ngModel)]="indent.deliveryPeriod" required />
  
      <label>Installation Requirements Ready?<span class="required-star">*</span></label>
      <select name="installationReady" [(ngModel)]="indent.installationReady" required>
        <option value="">Select</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
  
      <div *ngIf="indent.installationReady === 'No'">
        <label>Expected Time:</label>
        <input type="text" name="expectedTime" [(ngModel)]="indent.expectedTime" placeholder="Enter expected time" />
      </div>
  
      <!-- Purchase Mode -->
      <label>Purchase Mode:<span class="required-star">*</span></label>
      <select name="purchaseMode" [(ngModel)]="indent.purchaseMode" required>
        <option value="" disabled>Select</option>
        <option>GeM</option>
        <option>Local Purchase Committee</option>
        <option>PAC(Proprietary Article)</option>
        <option>Other</option>
      </select>
  
      <!-- Vendor Details -->
      <fieldset *ngIf="showVendorDetails">
        <legend>Vendor Details</legend>
        <div *ngFor="let vendor of indent.vendors; let i = index">
          <label>Vendor Name:<span class="required-star">*</span></label>
          <input type="text" [(ngModel)]="vendor.vendorName" name="vendorName{{i}}" required />
  
          <label>Mobile Number:<span class="required-star">*</span></label>
          <input type="text" [(ngModel)]="vendor.vendorMobile" name="vendorMobile{{i}}" required />
  
          <label>Address:<span class="required-star">*</span></label>
          <textarea [(ngModel)]="vendor.vendorAddress" name="vendorAddress{{i}}" required></textarea>
  
          <label>Email:<span class="required-star">*</span></label>
          <input type="email" [(ngModel)]="vendor.vendorEmail" name="vendorEmail{{i}}" required />
  
          <button type="button" (click)="removeVendor(i)">Remove Vendor</button>
        </div>
        <button type="button" (click)="addVendor()">Add Vendor</button>
      </fieldset>
  
      <!-- Inspection and Training -->
      <label>Inspection Date:<span class="required-star">*</span></label>
      <input type="date" name="inspectionDate" [(ngModel)]="indent.inspectionDate" required />
  
      <label>Training Period Required?<span class="required-star">*</span></label>
      <select name="trainingRequired" [(ngModel)]="indent.trainingRequired" required>
        <option value="">Select</option>
        <option>Yes</option>
        <option>No</option>
      </select>
  
      <div *ngIf="indent.trainingRequired === 'Yes'">
        <label>Reason for Training:<span class="required-star">*</span></label>
        <textarea name="trainingReason" [(ngModel)]="indent.trainingReason" required></textarea>
      </div>
  
      <label>Operational Availability Date:<span class="required-star">*</span></label>
      <input type="date" name="operationalDate" [(ngModel)]="indent.operationalDate" required />
  
      <!-- Emergency & Warranty -->
      <label>Emergency Purchase?<span class="required-star">*</span></label><br />
      <label><input type="radio" name="emergencyPurchase" [(ngModel)]="indent.emergencyPurchase" value="Yes" /> Yes</label>
      <label><input type="radio" name="emergencyPurchase" [(ngModel)]="indent.emergencyPurchase" value="No" /> No</label>
  
      <label>Warranty Details:<span class="required-star">*</span></label>
      <textarea name="warrantyDetails" [(ngModel)]="indent.warrantyDetails" required></textarea>
  
      <!-- AMC / CMC -->
      <label>AMC/CMC Required?<span class="required-star">*</span></label><br />
      <label><input type="radio" name="amcRequired" [(ngModel)]="indent.amcRequired" value="Yes" /> Yes</label>
      <label><input type="radio" name="amcRequired" [(ngModel)]="indent.amcRequired" value="No" /> No</label>
  
      <!-- Repeat Order -->
      <label>Repeat Order?<span class="required-star">*</span></label>
      <select name="repeatOrder" [(ngModel)]="indent.repeatOrder" required>
        <option value="">Select</option>
        <option>Yes</option>
        <option>No</option>
      </select>
  
      <div *ngIf="indent.repeatOrder === 'Yes'">
        <label>Upload Undertaking Form:<span class="required-star">*</span></label>
        <input type="file" (change)="onFileSelected($event)" accept=".jpg,.jpeg,.png,.pdf,.doc,.docx" />
      </div>
  
      <!-- Certification Section -->
      <fieldset>
        <p><strong>This is to certify that:</strong></p>
        <label><input type="checkbox" name="certification1" [(ngModel)]="indent.certification1" /> Broad-based specs</label>
        <label><input type="checkbox" name="certification2" [(ngModel)]="indent.certification2" /> Procurement Manual</label>
        <label><input type="checkbox" name="certification3" [(ngModel)]="indent.certification3" /> Quantity approval</label>
      </fieldset>
  
      <!-- Approval Section -->
      <label>Approval Status:<span class="required-star">*</span></label><br />
      <label><input type="radio" name="approvalStatus" [(ngModel)]="indent.approvalStatus" value="approved" /> Approved</label>
      <label><input type="radio" name="approvalStatus" [(ngModel)]="indent.approvalStatus" value="Not Approved" /> Not Approved</label>
  
      <p class="note">
        *If Indenter and approving authority are the same, then approval must be taken from the next higher authority.
      </p>
  
      <!-- Certificate Section -->
      <label class="certificate-button">Certificate</label>
      <label><input type="checkbox" name="certified" [(ngModel)]="indent.certified" /> Stock not available</label>
      <textarea name="remarks" [(ngModel)]="indent.remarks" placeholder="Remark..."></textarea>
  
      <!-- Submit Buttons -->
      <div class="button-container">
        <button type="submit" [disabled]="!indentForm.form.valid" class="no-print">Submit</button>
        <button type="button" (click)="saveDraft()" *ngIf="!isSubmitted || !isEditing" class="no-print">Save as Draft</button>
        <button type="button" (click)="editForm()" *ngIf="isEditing" class="no-print">Edit</button>
      </div>
    </form>
  </div>
  